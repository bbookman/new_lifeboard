<!DOCTYPE html>
<html>
<head>
    <title>Lifeboard Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <h1>Lifeboard Chat</h1>
    
    {% if error %}
    <p style="color: red">Error: {{ error }}</p>
    {% endif %}
    
    {% if response %}
    <div>
        <h3>Your Question:</h3>
        <p>{{ user_message }}</p>
        
        <h3>Response:</h3>
        <p>{{ response }}</p>
    </div>
    <hr>
    {% endif %}
    
    <form method="post">
        <label for="message">Ask about your Limitless data:</label><br>
        <textarea name="message" id="message" rows="4" cols="50" placeholder="What would you like to know about your data?" required></textarea><br><br>
        <input type="submit" value="Send">
    </form>
    
    {% if history %}
    <h3>Recent Chat History</h3>
    {% for chat in history %}
    <div style="margin-bottom: 20px; border-bottom: 1px solid #ccc; padding-bottom: 10px;">
        <p><strong>You:</strong> {{ chat.user_message }}</p>
        <p><strong>Assistant:</strong> {{ chat.assistant_response }}</p>
        <small>{{ chat.timestamp }}</small>
    </div>
    {% endfor %}
    {% endif %}
</body>
</html>